purge recyclebin;

create table Student (
Univ_Roll number primary key, 
Student_Roll number not null, 
Student_Name varchar2(30), 
Year number(1) not null, 
Section varchar2(1) not null,
Department varchar2(3),
constraint fk_dept foreign key (Department, Year) references Student_Course(Department, Year) );

create table Student_Login (
Univ_Roll number primary key, 
Password varchar2(10) not null,
constraint fk_univ_roll foreign key (Univ_Roll) references Student(Univ_Roll));

create table Student_Course (
Department varchar2(3),
Year number(1),
Course_No1 number,
Course_No2 number,
Course_No3 number,
Course_No4 number,
Course_No5 number,
Course_No6 number,
constraint pk_stud_course primary key (Department, Year),
constraint fk_course1 foreign key (Course_No1) references Course(Course_No),
constraint fk_course2 foreign key (Course_No2) references Course(Course_No),
constraint fk_course3 foreign key (Course_No3) references Course(Course_No),
constraint fk_course4 foreign key (Course_No4) references Course(Course_No),
constraint fk_course5 foreign key (Course_No5) references Course(Course_No),
constraint fk_course6 foreign key (Course_No6) references Course(Course_No) );

create table Course (
Course_No number default 100 primary key, 
Course_Name varchar2(20) );

create table Faculty (
Faculty_ID number primary key, 
Faculty_Name varchar2(20), 
Password varchar2(10) not null,
Course_No1 number,
Course_No2 number,
Course_No3 number, 
constraint fk_fac_course1 foreign key (Course_No1) references Course(Course_No),
constraint fk_fac_course2 foreign key (Course_No2) references Course(Course_No),
constraint fk_fac_course3 foreign key (Course_No3) references Course(Course_No) );

create table Faculty_Course (
Faculty_ID number primary key, 
 );

create table Attendance (
Univ_Roll number,  
Day Date, 
Course1 number,
Course2 number,
Course3 number,
Course4 number,
Course5 number,
Course6 number,
Present number,
constraint pk_attend primary key (Univ_Roll, Day),
constraint fk_univ_att foreign key (Univ_Roll) references Student(Univ_Roll), 
constraint fk_attend_course1 foreign key (Course1) references Course(Course_No),
constraint fk_attend_course2 foreign key (Course2) references Course(Course_No),
constraint fk_attend_course3 foreign key (Course3) references Course(Course_No),
constraint fk_attend_course4 foreign key (Course4) references Course(Course_No),
constraint fk_attend_course5 foreign key (Course5) references Course(Course_No),
constraint fk_attend_course6 foreign key (Course6) references Course(Course_No) );

create table Routine (
Year number(1),
Department varchar2(3),
Section varchar2(1),
Day varchar2(2),
Course_No number,
Time varchar2(20),
Faculty_ID number,
constraint pk_routine primary key (Department, Year, Section, Day),
constraint fk_dept_routine foreign key (Department, Year) references Student_Course(Department, Year),
constraint fk_course_routine foreign key (Course_No) references Course(Course_No),
constraint fk_fac_id foreign key (Faculty_ID) references Faculty(Faculty_ID));

alter table Attendance drop constraint SYS_C0011733;
alter table Attendance drop constraint fk_univ_att;
alter table Student_Login add constraint fk_stud_login FOREIGN KEY (Univ_Roll) references Student(Univ_Roll) initially deferred deferrable;
alter table Course drop column Course_Name;
drop table Faculty;
drop table Attendance;

alter table Faculty add Course3 number(3);
alter table Faculty add constraint fk_fac_course3 FOREIGN KEY (Course3) references Course(Course_No) initially deferred deferrable;